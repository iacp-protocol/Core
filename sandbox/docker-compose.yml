# C:\Users\bronn\core\sandbox\docker-compose.yml
# (pas de clé 'version:' — Compose V2 n'en a pas besoin)

services:
  agent_a:
    build:
      context: ..
      dockerfile: sandbox/Dockerfile
    environment:
      - AGENT_ID=agent_A
      - PEER_INBOX_URL=http://agent_b:8002/inbox
    command: ["python","-m","uvicorn","sandbox.agent_app:app","--host","0.0.0.0","--port","8001"]
    ports:
      - "8001:8001"
    volumes:
      - ../src:/app/src
      - ./logs:/app/sandbox/logs

  agent_b:
    build:
      context: ..
      dockerfile: sandbox/Dockerfile
    environment:
      - AGENT_ID=agent_B
      - PEER_INBOX_URL=http://agent_a:8001/inbox
    command: ["python","-m","uvicorn","sandbox.agent_app:app","--host","0.0.0.0","--port","8002"]
    ports:
      - "8002:8002"
    volumes:
      - ../src:/app/src
      - ./logs:/app/sandbox/logs




